:root{
  --primary-green:#8ddfc7;
  --primary-green-dark:#155d50;
  --brand-teal:#155d50;
  --brand-yellow:#FFC107;        /* VRM */
  --brand-deep-blue:#083a5e;     /* GROUPS */
  --border:#333;
  --text:#000;
  --bg:#fff;
  --bg-soft:#f5f5f5;
}

/* Global */
*{box-sizing:border-box;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif;
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility;}
.quotation-container{max-width:900px;margin:0 auto;padding:20px;color:var(--text);}
.toolbar{display:flex;align-items:center;gap:8px;margin-bottom:20px;padding:10px;background:var(--bg-soft);border-radius:6px}
.spacer{flex:1}
.btn{padding:8px 16px;border:none;border-radius:4px;cursor:pointer;font-size:14px;font-weight:500}
.btn.primary{background:var(--primary-green-dark);color:#fff}
.btn.ghost{background:transparent;border:1px solid var(--primary-green-dark);color:var(--primary-green-dark)}
.btn:hover{opacity:.92}
.btn:disabled{opacity:.6;cursor:not-allowed}

/* A4 sheet */
.invoice-sheet{width:210mm;min-height:297mm;margin:0 auto;background:var(--bg);
  border:3px solid var(--border);padding:0;position:relative;box-shadow:0 4px 10px rgba(0,0,0,.08)}
.invoice-sheet::after{content:"";position:absolute;inset:-3px;border:3px solid var(--border);pointer-events:none;z-index:-1}

/* ===== HEADER ===== */
.modern-header{background:var(--primary-green);padding:18px 22px;border-bottom:3px solid var(--border)}
.header-grid-3{display:grid;grid-template-columns:260px 1fr 340px;gap:16px;align-items:start}

/* Left (title + contacts) */
.construction-heading{color:var(--brand-teal);line-height:1}
.construction-heading span{font-weight:700;font-size:24px}
.construction-heading strong{font-weight:900;font-size:26px}
.header-left{display:flex;flex-direction:column;gap:8px}
.contact-line{display:flex;align-items:center;gap:8px}
.ic{width:18px;height:18px;display:inline-flex;opacity:.9;color:var(--brand-teal)}
.ic svg{width:18px;height:18px;fill:currentColor}
.contact-line input{flex:1;border:none;outline:none;background:transparent;color:var(--brand-teal);font-weight:600}

/* Center (logo + brand) */
.header-center{display:flex;flex-direction:column;align-items:center;gap:10px}
.logo-image{max-width:120px;max-height:120px;object-fit:contain;background-color: #f5f5f5;filter:drop-shadow(0 1px 0 rgba(0,0,0,.06)); border-radius: 10px;}
.brand-badge{display:inline-flex;align-items:center;gap:8px;padding:8px 14px;border-radius:10px;}
.brand-vrm{font-size:25px;font-weight:900;letter-spacing:.4px;color:var(--brand-yellow)}
.brand-groups{font-size:25px;font-weight:900;letter-spacing:.4px;color:var(--brand-deep-blue)}

/* Right (address + GST) */
.header-right{
  display:flex;flex-direction:column;gap:4px;
  margin-left:auto;           /* push to the right edge cleanly */
  max-width:340px; width:100%;
}
.addr-row{
  display:grid;
  grid-template-columns:18px 1fr; /* icon + text */
  column-gap:6px;
  align-items:center;
  justify-items:end;            /* keep both at the right edge */
  width:69%;
}
.addr-row.no-icon .ic{visibility:hidden} /* reserve space so all lines align */
.addr-row input{
  height: 27px;
  border:none;outline:none;background:transparent;
  color:var(--brand-teal);font-weight:600;font-size:11px;
  text-align:right;width:100%;
  white-space:normal;word-break:break-word; /* allow wrapping */
}
.gst-row input{font-size:11px}

/* Title bar */
.invoice-title{background:var(--primary-green-dark);color:#fff;text-align:center;font-size:24px;font-weight:800;
  padding:14px 12px;border-bottom:2px solid var(--border)}

/* ===== GRID BELOW HEADER ===== */
.bill-site-section{display:grid;grid-template-columns:1fr 1fr;border-bottom:2px solid var(--border)}
.bill-to{border-right:2px solid var(--border)}
.section-title{background:var(--bg-soft);font-weight:800;padding:8px 12px;border-bottom:1px solid var(--border);font-size:14px}
.field-group{padding:0}
.field{display:flex;min-height:30px;border-bottom:1px solid var(--border);align-items:center}
.field:last-child{border-bottom:none}
.field label{background:var(--bg-soft);border-right:2px solid var(--border);padding:6px 10px;font-size:11px;font-weight:700;min-width:92px;white-space:nowrap}
.field input{flex:1;border:none;outline:none;background:transparent;padding:6px 10px;font-size:11px}
.field input:focus{background:#ffffcc}

/* ===== TABLE ===== */
.materials-table{border-bottom:2px solid var(--border)}
.table-header{display:grid;grid-template-columns:35px 1fr 65px 50px 55px 85px 50px 50px 85px 85px;background:var(--primary-green-dark);color:#fff;font-weight:800;font-size:11px}
.table-header>div{padding:10px 6px;border-right:2px solid #fff;display:flex;align-items:center;justify-content:center}
.table-header>div:last-child{border-right:none}

.table-row{display:grid;grid-template-columns:35px 1fr 65px 50px 55px 85px 50px 50px 85px 85px;min-height:40px;border-bottom:1px solid var(--border);background:#fff}
.table-row:nth-child(even){background:#f9f9f9}
.table-row>div{padding:6px 4px;border-right:1px solid var(--border);display:flex;align-items:center;justify-content:center;font-size:11px;overflow:visible}
.table-row>div:last-child{border-right:none}
.col-desc{justify-content:flex-start !important;padding:6px 8px !important}
.col-num{background:var(--bg-soft);font-weight:700}
.table-row input,.table-row select{width:100%;border:none;background:transparent;outline:none;font-size:10px;text-align:center;padding:4px 2px}
.col-desc input{text-align:left;padding:4px 6px}
.col-price input,.col-amount{text-align:right}
.table-row input:focus,.table-row select:focus{background:#ffffcc;border:1px solid var(--primary-green-dark);border-radius:2px}
.remove-btn{background:#dc3545;color:#fff;border:none;padding:4px 8px;border-radius:3px;font-size:10px;cursor:pointer}
.remove-btn:hover{background:#c82333}

/* Compact total row */
.table-total-row{display:grid !important;grid-template-columns:1fr 140px !important;align-items:center !important;background:var(--primary-green);color:var(--primary-green-dark);font-weight:800;border-bottom:2px solid var(--border)}
.table-total-row .total-label{grid-column:1/2;text-align:left;padding:10px 12px}
.table-total-row .col-amount{grid-column:2/3;text-align:right;padding:10px 12px}

/* Add material */
.add-material-section{padding:15px;text-align:center}
.add-material{background:var(--primary-green-dark);color:#fff;border:none;padding:10px 24px;border-radius:4px;cursor:pointer;font-size:12px;font-weight:700}

/* Bottom */
.bottom-section{display:grid;grid-template-columns:1fr 320px}
.amount-words{padding:15px;border-right:2px solid var(--border)}
.amount-words .label{font-weight:800;margin-bottom:10px;font-size:12px}
.words-value{font-style:italic;min-height:45px;font-size:11px;margin-bottom:26px}
.signature-area{margin-top:50px;text-align:center;border-top:2px solid var(--border);padding-top:8px}
.signature-label{font-size:11px;font-weight:800}
.totals-section{padding:0}
.total-row{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;border-bottom:1px solid var(--border);font-size:12px}
.total-row:last-child{border-bottom:none}
.total-row.grand-total{background:var(--primary-green-dark);color:#fff;font-weight:800;font-size:14px}
.total-row .value{font-weight:800;min-width:90px;text-align:right}
.discount-input{width:64px;margin-left:8px;padding:3px 6px;border:1px solid #ccc;border-radius:3px;font-size:12px}

/* Static text used in PDF clone - ENHANCED */
.control-static{
  color: #000 !important;
  background: transparent !important;
  border: none !important;
  outline: none !important;
  font-family: Arial, Helvetica, sans-serif !important;
  font-size: inherit !important;
  line-height: 1.4 !important;
  white-space: normal !important;
  word-break: break-word !important;
  overflow: visible !important;
  display: block !important;
  width: 100% !important;
  height: auto !important;
  min-height: 20px !important;
  padding: inherit !important;
  margin: inherit !important;
  text-align: inherit !important;
  font-weight: inherit !important;
  vertical-align: middle !important;
  box-sizing: border-box !important;
}

/* Preview freeze */
.preview input[readonly], .preview select[disabled], .preview textarea[readonly]{background:transparent;border:none;color:var(--text);font-weight:normal;cursor:default}
.preview .discount-input{display:none}

/* Print/PDF adjustments - ENHANCED */
.print-mode .remove-btn,.print-mode .add-material-section,.print-mode .col-action{display:none !important}
.print-mode .table-header,.print-mode .table-row,.print-mode .table-total-row{grid-template-columns:35px 1fr 65px 50px 55px 85px 50px 50px 85px !important}

/* PDF mode specific improvements */
.pdf-mode {
  font-family: Arial, Helvetica, sans-serif !important;
  -webkit-font-smoothing: antialiased !important;
  text-rendering: optimizeLegibility !important;
}

.pdf-mode .col-action, 
.pdf-mode .remove-btn, 
.pdf-mode .add-material-section {
  display: none !important;
}

.pdf-mode .table-header,
.pdf-mode .table-row,
.pdf-mode .table-total-row {
  grid-template-columns: 35px 1fr 65px 50px 55px 85px 50px 50px 85px !important;
}

.pdf-mode * {
  line-height: 1.4 !important;
  -webkit-text-size-adjust: 100% !important;
  font-family: Arial, Helvetica, sans-serif !important;
}

.pdf-mode input, 
.pdf-mode select, 
.pdf-mode textarea {
  color: #000 !important;
  background: transparent !important;
  border: none !important;
  font-family: Arial, Helvetica, sans-serif !important;
  font-size: inherit !important;
  line-height: 1.4 !important;
  white-space: normal !important;
  word-break: break-word !important;
  overflow: visible !important;
}

.pdf-mode .control-static {
  color: #000 !important;
  background: transparent !important;
  border: none !important;
  font-family: Arial, Helvetica, sans-serif !important;
  font-size: inherit !important;
  line-height: 1.4 !important;
  white-space: normal !important;
  word-break: break-word !important;
  overflow: visible !important;
  display: block !important;
  width: 100% !important;
  height: auto !important;
  min-height: 20px !important;
  text-align: inherit !important;
  font-weight: inherit !important;
  vertical-align: middle !important;
  box-sizing: border-box !important;
}

.print-mode *, .pdf-mode *{
  line-height: 1.4 !important;
  -webkit-text-size-adjust: 100% !important;
}

.table-header>div,.table-row>div,.table-total-row>div,.field{
  min-height: 28px;
  display: flex;
  align-items: center;
}

/* @page + print */
@page{size:A4;margin:12mm}
@media print{
  .no-print{display:none !important}
  .quotation-container{max-width:100%;padding:0}
  .invoice-sheet{width:100%;min-height:auto;margin:0;box-shadow:none;border:3px solid var(--border)}
  .table-header,.table-row,.table-total-row{grid-template-columns:35px 1fr 65px 50px 55px 85px 50px 50px 85px !important}
  input,select,textarea{background:transparent !important;border:none !important;color:var(--text) !important}
  .invoice-title,.table-header,.total-row.grand-total,.table-total-row{-webkit-print-color-adjust:exact;print-color-adjust:exact}
  .remove-btn, .col-action{display:none !important}
  
  /* Enhanced print text rendering */
  * {
    font-family: Arial, Helvetica, sans-serif !important;
    -webkit-font-smoothing: antialiased !important;
    text-rendering: optimizeLegibility !important;
    color: #000 !important;
  }
}

/* Responsive (preview only) */
@media screen and (max-width:900px){
  .invoice-sheet{width:100%;transform:scale(.8);transform-origin:top center;margin-bottom:-70px}
  .header-grid-3{grid-template-columns:1fr}
  .header-right{align-items:flex-start}
  .addr-row{justify-items:start}
  .addr-row input{text-align:left}
  .bottom-section{grid-template-columns:1fr}
  .totals-section{border-top:2px solid var(--border)}
  .amount-words{border-right:none;border-bottom:2px solid var(--border)}
}